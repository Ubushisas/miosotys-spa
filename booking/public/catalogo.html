<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cat√°logo - Myosotis Spa</title>
    <link rel="icon" type="image/png" href="./favicon.png">
    <link rel="stylesheet" href="styles.min.css?v=1" />
  </head>
  <body>
    <!-- Custom Cursor -->
    <div id="customCursor">
      <img src="./Test_Images/Flor-mouse.png" alt="Custom Cursor" />
    </div>

    <!-- Background Music -->
    <audio id="backgroundMusic" loop>
      <source src="./Assets/4) Myosotis_compressed.mp3" type="audio/mpeg">
      Your browser does not support the audio element.
    </audio>

    <!-- Catalogue Section -->
    <div class="catalogue-section">
      <nav>
        <div class="logo">
          <img src="./Test_Images/Myosotis-by-monica-blanco-opt.png" alt="Myosotis Logo" onclick="goBackToCatalog()" style="cursor: pointer; background: none !important;" />
        </div>
        <div class="nav-items">
          <p onclick="goBackToCatalog()">Inicio</p>
        </div>
      </nav>

      <div class="sticky-cards-container">
        <!-- Card 0 - Servicios Disponibles (Intro) -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Intro.jpg" alt="Myosotis Spa Servicios" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Nuestros Servicios</h1>
                <div class="sticky-card-copy-description" style="text-align: center; padding-left: 0; display: flex; flex-direction: column; gap: 0.5rem; max-width: 450px; align-items: center; margin: 0 auto;">
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa Individual</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa para Parejas</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa para Amigas</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa para Ni√±as</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa para Familias</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Spa Luxury</p>
                  <p style="margin: 0; font-size: 1.4rem;">‚Ä¢ Eventos Especiales</p>
                </div>
                <div class="scroll-arrow" onclick="scrollToNextCard(1)">
                  <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <polyline points="6 9 12 15 18 9"></polyline>
                  </svg>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 1 - Spa Individual -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Individual.jpg?v=2" alt="Spa Individual" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa Individual</h1>
                <div class="sticky-card-copy-title">
                  <p>(Experiencia Personal)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Tratamientos personalizados para tu bienestar individual en un oasis de tranquilidad y renovaci√≥n.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(1)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(0)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(2)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 2 - Spa para Parejas -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Couples.jpg" alt="Spa para Parejas" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa para Parejas</h1>
                <div class="sticky-card-copy-title">
                  <p>(Conexi√≥n Rom√°ntica)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Fortalece tu v√≠nculo con tratamientos √≠ntimos y relajantes dise√±ados para reconectar en un ambiente rom√°ntico.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(2)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(1)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(3)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 3 - Spa para Amigas -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Friends.jpg?v=2" alt="Spa para Amigas" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa para Amigas</h1>
                <div class="sticky-card-copy-title">
                  <p>(Celebraci√≥n de Amistad)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Celebra la amistad con tratamientos grupales llenos de diversi√≥n y relajaci√≥n en un ambiente exclusivo.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(3)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(2)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(4)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 4 - Spa para Ni√±as -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Kids.jpg" alt="Spa para Ni√±as" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa para Ni√±as</h1>
                <div class="sticky-card-copy-title">
                  <p>(Diversi√≥n y Cuidado)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Experiencias m√°gicas y seguras donde las ni√±as disfrutan tratamientos divertidos sinti√©ndose como princesas.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(4)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(3)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(5)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 5 - Spa para Familias -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Family.jpg" alt="Spa para Familias" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa para Familias</h1>
                <div class="sticky-card-copy-title">
                  <p>(Uni√≥n Familiar)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Crea recuerdos inolvidables con experiencias adaptadas para todas las edades en un ambiente familiar acogedor.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(5)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(4)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(6)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 6 - Spa Luxury -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/Luxury.jpg" alt="Spa Luxury" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Spa Luxury</h1>
                <div class="sticky-card-copy-title">
                  <p>(Experiencia Premium)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>M√°ximo lujo y sofisticaci√≥n con servicios VIP, productos premium y atenci√≥n personalizada exclusiva.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(6)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(5)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                  <div class="scroll-arrow scroll-arrow-down" onclick="scrollToNextCard(7)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="6 9 12 15 18 9"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Card 7 - Eventos Especiales -->
        <div class="sticky-card">
          <div class="sticky-card-content">
            <div class="sticky-card-content-wrapper">
              <div class="sticky-card-img">
                <img src="./Test_Images/Test2/SpecialEvents.jpg" alt="Eventos Especiales" />
              </div>
              <div class="sticky-card-copy">
                <h1 class="sticky-card-header">Eventos Especiales</h1>
                <div class="sticky-card-copy-title">
                  <p>(Celebraciones √önicas)</p>
                </div>
                <div class="sticky-card-copy-description">
                  <p>Eventos memorables con servicios personalizados para despedidas, celebraciones corporativas y ocasiones especiales √∫nicas.</p>
                </div>
                <div class="sticky-card-button">
                  <button onclick="showPackages(7)">Ver paquetes</button>
                </div>
                <div class="scroll-arrows-container">
                  <div class="scroll-arrow scroll-arrow-up" onclick="scrollToPrevCard(6)">
                    <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                      <polyline points="18 15 12 9 6 15"></polyline>
                    </svg>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Sliding Package Window -->
    <div id="packageWindow" class="package-window">
      <div class="package-window-content">
        <div class="package-window-header">
          <h2 id="packageTitle">Paquetes Disponibles</h2>
          <button class="close-btn" onclick="hidePackages()">&times;</button>
        </div>
        <div class="package-window-body">
          <div id="packageContent">
            <!-- Package content will be loaded here -->
          </div>
        </div>
      </div>
    </div>

    <!-- Calendly Sliding Window -->
    <div id="calendlyWindow" class="package-window">
      <div class="package-window-content">
        <div class="package-window-header">
          <h2>Agendar Limpieza Facial</h2>
          <button class="close-btn" onclick="hideCalendly()">&times;</button>
        </div>
        <div class="package-window-body">
          <div id="calendlyContent">
            <!-- Calendly widget will be inserted here -->
          </div>
        </div>
      </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.5/ScrollTrigger.min.js"></script>
    <script src="//widget.simplybook.me/v2/widget/widget.js"></script>
    <script>
      // Smooth Fade Animation Function (same as info.html)
      function slideOutIn() {
        document.documentElement.animate(
          [
            {
              opacity: 1,
              transform: "translateY(0)",
            },
            {
              opacity: 0.6,
              transform: "translateY(15%)",
            },
          ],
          {
            duration: 2000,
            easing: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
            fill: "forwards",
            pseudoElement: "::view-transition-old(root)",
          }
        );

        document.documentElement.animate(
          [
            {
              clipPath: "polygon(0% 0%, 100% 0%, 100% 0%, 0% 0%)",
            },
            {
              clipPath: "polygon(0% 0%, 100% 0%, 100% 100%, 0% 100%)",
            },
          ],
          {
            duration: 2000,
            easing: "cubic-bezier(0.25, 0.46, 0.45, 0.94)",
            fill: "forwards",
            pseudoElement: "::view-transition-new(root)",
          }
        );
      }

      function goBackToCatalog() {
        // Save music position before navigation
        const backgroundMusic = document.getElementById('backgroundMusic');
        if (backgroundMusic && !backgroundMusic.paused) {
          localStorage.setItem('musicTime', backgroundMusic.currentTime);
        }
        window.location.href = 'index.html';
      }

      // Store original card positions (will be set on page load)
      let cardPositions = [];

      // Scroll to next card function
      function scrollToNextCard(targetCardIndex) {
        if (cardPositions[targetCardIndex] !== undefined) {
          window.scrollTo({
            top: cardPositions[targetCardIndex],
            behavior: 'smooth'
          });
        }
      }

      // Scroll to previous card function
      function scrollToPrevCard(targetCardIndex) {
        if (cardPositions[targetCardIndex] !== undefined) {
          window.scrollTo({
            top: cardPositions[targetCardIndex],
            behavior: 'smooth'
          });
        }
      }

      // Package data for each service
      const packageData = {
        1: { // Spa Individual
          title: "Spa Individual - Paquetes",
          packages: [
            {
              name: "Limpieza Facial",
              description: "Tratamiento especializado para revitalizar la piel y restaurar su equilibrio natural.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Eliminaci√≥n de impurezas profundas<br>‚Ä¢ Renovaci√≥n celular y mejora de la oxigenaci√≥n de la piel<br>‚Ä¢ Regulaci√≥n del pH e hidrataci√≥n intensiva<br>‚Ä¢ Prevenci√≥n del envejecimiento prematuro<br>‚Ä¢ Reducci√≥n de imperfecciones como poros dilatados, manchas y cicatrices<br>‚Ä¢ Relajaci√≥n y bienestar para el rostro",
              duration: "Consultar duraci√≥n",
              price: "Consultar precio"
            },
            {
              name: "Exfoliaci√≥n Corporal",
              description: "Terapia de renovaci√≥n que elimina c√©lulas muertas y transforma la textura de la piel.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Mejora notable de la apariencia y suavidad de la piel<br>‚Ä¢ Estimulaci√≥n de la circulaci√≥n<br>‚Ä¢ Preparaci√≥n ideal para posteriores tratamientos de hidrataci√≥n o nutrici√≥n<br>‚Ä¢ Uso de exfoliantes f√≠sicos o qu√≠micos, seleccionados seg√∫n las necesidades de cada cliente",
              duration: "Consultar duraci√≥n",
              price: "Consultar precio"
            },
            {
              name: "Masaje con Aceite Caliente",
              description: "Un masaje terap√©utico y sensorial que armoniza cuerpo y mente.<br><br><strong>Incluye:</strong><br>‚Ä¢ Aplicaci√≥n de aceites herbales tibios en todo el cuerpo<br>‚Ä¢ Estimulaci√≥n profunda para liberar tensiones<br>‚Ä¢ Nutrici√≥n de la piel a trav√©s de aceites naturales<br>‚Ä¢ Promueve el equilibrio f√≠sico y mental<br>‚Ä¢ Favorece la eliminaci√≥n de toxinas",
              duration: "Consultar duraci√≥n",
              price: "Consultar precio"
            },
            {
              name: "Masaje con Piedras Calientes",
              description: "Terapia ancestral que combina calor y masaje para aliviar tensiones.<br><br><strong>Objetivo:</strong><br>‚Ä¢ Aplicaci√≥n de piedras calientes de basalto en puntos espec√≠ficos del cuerpo<br>‚Ä¢ Relajaci√≥n muscular profunda y localizada<br>‚Ä¢ Reducci√≥n de dolores y contracturas<br>‚Ä¢ T√©cnica que permite liberar tensi√≥n sin necesidad de presi√≥n excesiva<br>‚Ä¢ Una experiencia que equilibra energ√≠a y bienestar",
              duration: "Consultar duraci√≥n",
              price: "Consultar precio"
            },
            {
              name: "Masaje Relajante",
              description: "Desconecta, respira y suelta tensiones, es un masaje dise√±ado para calmar tu mente y renovar tu cuerpo.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Liberaci√≥n de estr√©s y tensi√≥n acumulada<br>‚Ä¢ Mejora de la circulaci√≥n sangu√≠nea<br>‚Ä¢ Relajaci√≥n muscular profunda<br>‚Ä¢ Sensaci√≥n de paz y bienestar total<br>‚Ä¢ Perfecto para recargar energ√≠a y sentirte renovad@ al instante",
              duration: "1 hora",
              price: "$110.000"
            },
            {
              name: "Masaje Linf√°tico",
              description: "Drena, desinflama y estiliza tu cuerpo de forma natural.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Eliminaci√≥n de l√≠quidos retenidos<br>‚Ä¢ Reducci√≥n de hinchaz√≥n y toxinas<br>‚Ä¢ Mejora de la circulaci√≥n linf√°tica<br>‚Ä¢ Estimulaci√≥n del sistema inmunol√≥gico<br>‚Ä¢ Sentirte livian@ y renovad@ desde la primera sesi√≥n",
              duration: "1 hora",
              price: "$110.000"
            },
            {
              name: "Masaje Moldeador",
              description: "Esculpe y define tu figura con t√©cnicas especializadas.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Reducci√≥n de medidas y celulitis<br>‚Ä¢ Tonificaci√≥n y firmeza de la piel<br>‚Ä¢ Realce de curvas naturales<br>‚Ä¢ Mejora de la textura de la piel<br>‚Ä¢ Resultados visibles y una silueta m√°s contorneada",
              duration: "1 hora",
              price: "$110.000"
            }
          ]
        },
        2: { // Spa para Parejas
          title: "Spa para Parejas - Paquetes",
          packages: [
            {
              name: "Rom√°ntico Oasis para Dos",
              description: "Un refugio √≠ntimo dise√±ado para renovar la conexi√≥n y el amor en pareja.<br><br><strong>Incluye:</strong><br>‚Ä¢ Masaje en pareja con aceites de rosas y lavanda, para relajar y estimular los sentidos<br>‚Ä¢ Tiempo privado en jacuzzi con p√©talos y velas arom√°ticas, en un ambiente √≠ntimo<br>‚Ä¢ Tabla de quesos acompa√±ada de una copa de vino espumoso",
              duration: "2 horas 45 minutos",
              price: "$450.000 por pareja"
            },
            {
              name: "Retiro de Reconciliaci√≥n para Dos",
              description: "Un espacio de paz y calma pensado para fortalecer lazos y reconectar en pareja.<br><br><strong>Incluye:</strong><br>‚Ä¢ Copa de vino de bienvenida<br>‚Ä¢ Masaje en pareja para aliviar estr√©s y tensiones<br>‚Ä¢ Sesi√≥n creativa con chocolate, fomentando diversi√≥n y conexi√≥n<br>‚Ä¢ Hidroterapia y aromaterapia en pareja<br>‚Ä¢ tabla de quesos, chocolates gourmet y bebida fr√≠a (con o sin alcohol)",
              duration: "3 horas 15 minutos",
              price: "$540.000 por pareja"
            },
            {
              name: "Paquete de Aniversario",
              description: "Una experiencia dise√±ada para celebrar el amor y disfrutar en pareja de momentos de relajaci√≥n total.<br><br><strong>Incluye:</strong><br>‚Ä¢ Masajes en pareja<br>‚Ä¢ Tratamientos faciales rejuvenecedores<br>‚Ä¢ Tabla de quesos acompa√±ada de una bebida (con o sin alcohol)",
              duration: "2 horas",
              price: "$400.000 por pareja"
            }
          ]
        },
        3: { // Spa para Amigas
          title: "Spa para Amigas - Paquetes",
          packages: [
            {
              name: "Tarde de Chicas",
              description: "Vive un retiro fascinante con tus amigas en un ambiente de lujo y confort.<br><br><strong>Incluye:</strong><br>‚Ä¢ Masaje de cuerpo completo con aceites esenciales arom√°ticos, dise√±ado para relajar y revitalizar los sentidos<br>‚Ä¢ Mascarilla revitalizante para aportar un brillo natural a la piel<br>‚Ä¢ Sesi√≥n de jacuzzi con sales minerales org√°nicas para una experiencia de bienestar<br>‚Ä¢ Acceso a sauna y turco para purificar y rejuvenecer el cuerpo<br>‚Ä¢ Snack saludable acompa√±ado de una bebida refrescante para cerrar la experiencia<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "3 horas",
              price: "1 persona ‚Üí $230.000<br>2 personas ‚Üí $460.000<br>3 personas ‚Üí $690.000<br>4 personas ‚Üí $870.000<br>5 personas ‚Üí $1.150.000<br>6 personas ‚Üí $1.310.000"
            },
            {
              name: "Pasabordo Express de Desestr√©s",
              description: "Para cambiar de rutina y aliviar el estr√©s del d√≠a a d√≠a, disfruta de un momento dise√±ado para relajar cuerpo y mente.<br><br><strong>Incluye:</strong><br>‚Ä¢ Hidromasaje para liberar tensi√≥n acumulada<br>‚Ä¢ Masaje corporal relajante con piedras calientes, ideal para aliviar la tensi√≥n localizada en los m√∫sculos<br><br>Una pausa perfecta para recargar energ√≠as.<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "1 hora 20 minutos",
              price: "1 persona ‚Üí $160.000<br>2 personas ‚Üí $320.000<br>3 personas ‚Üí $480.000<br>4 personas ‚Üí $610.000<br>5 personas ‚Üí $800.000<br>6 personas ‚Üí $910.000"
            }
          ]
        },
        4: { // Spa para Ni√±as
          title: "Spa para Ni√±as - Paquetes",
          packages: [
            {
              name: "Experiencia de Armon√≠a para Adolescentes",
              description: "Un plan divertido y relajante para compartir con amigas, fortalecer amistades y disfrutar de un ambiente dise√±ado para el bienestar.<br><br><strong>Incluye:</strong><br>‚Ä¢ Sesi√≥n en sauna para abrir poros y preparar la piel<br>‚Ä¢ Ingreso al turco con esencias herbales que relajan los m√∫sculos<br>‚Ä¢ Experiencia de chocolaterapia, ideal para expresarse y relajarse en grupo<br>‚Ä¢ Masaje facial refrescante con limpieza y mascarilla calmante<br>‚Ä¢ Masaje corporal relajante para aliviar tensi√≥n y promover calma<br>‚Ä¢ Jacuzzi de relajaci√≥n con aguas c√°lidas y burbujeantes<br>‚Ä¢ Selecci√≥n de snacks saludables para cerrar la experiencia<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "2 horas 45 minutos",
              price: "1 persona ‚Üí $240.000<br>2 personas ‚Üí $480.000<br>3 personas ‚Üí $720.000<br>4 personas ‚Üí $910.000<br>5 personas ‚Üí $1.200.000<br>6 personas ‚Üí $1.370.000"
            },
            {
              name: "Aventura Spa para Preadolescentes",
              description: "Un plan dise√±ado para que los m√°s j√≥venes disfruten de una experiencia segura, divertida y relajante, con tratamientos adaptados a sus necesidades.<br><br><strong>Incluye:</strong><br>‚Ä¢ Bebida natural de frutas y snack saludable de bienvenida<br>‚Ä¢ Sesi√≥n en turco arom√°tico con esencias herbales suaves<br>‚Ä¢ Relajaci√≥n en sauna, ideal para compartir y conversar<br>‚Ä¢ Jacuzzi con burbujas y luces LED en un ambiente l√∫dico<br>‚Ä¢ Mini facial refrescante: limpieza suave e hidrataci√≥n ligera<br>‚Ä¢ Masaje grupal de espalda y hombros para aliviar tensi√≥n<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "3 horas 15 minutos",
              price: "1 persona ‚Üí $270.000<br>2 personas ‚Üí $540.000<br>3 personas ‚Üí $810.000<br>4 personas ‚Üí $1.020.000<br>5 personas ‚Üí $1.350.000<br>6 personas ‚Üí $1.540.000"
            }
          ]
        },
        5: { // Spa para Familias
          title: "Spa Familiar - Paquetes",
          packages: [
            {
              name: "D√≠a de Spa para Mam√° e Hija",
              description: "Fortalece el v√≠nculo entre madre e hija(s) con un d√≠a de tratamientos especiales dise√±ados para las dos, incluyendo masajes relajantes, tratamientos faciales y tiempo de calidad juntas en nuestras instalaciones.<br><br><strong>Incluye:</strong><br>‚Ä¢ Comienza con una bebida de bienvenida de t√© de hierbas o agua refrescante con frutas para establecer el √°nimo de relajaci√≥n.<br>‚Ä¢ Disfruten de masajes de cuerpo completo, dise√±ados para relajar los m√∫sculos y nutrir el v√≠nculo entre madre e hija(s).<br>‚Ä¢ Sum√©rjanse en nuestra tina con sales minerales calmantes y suaves burbujas, brindando el ambiente perfecto para la conversaci√≥n y el v√≠nculo.<br>‚Ä¢ Exploren las √°reas h√∫medas que incluyen un tranquilo ba√±o de vapor y una sauna refrescante. Estas instalaciones ofrecen momentos para relajarse, liberar el estr√©s y compartir tiempo de paz juntas.<br>‚Ä¢ Disfruten de un delicioso surtido de bocadillos saludables, junto con una variedad de bebidas revitalizantes.<br>‚Ä¢ Desp√≠dete con un recuerdo especial para atesorar la experiencia.<br><br>Este paquete asegura tanto la relajaci√≥n como el tiempo de calidad, dise√±ado para fortalecer las conexiones y crear recuerdos duraderos entre Mam√° e Hija(s).",
              duration: "2 horas 30 minutos",
              price: "Paquete Mam√° e Hija: $380.000"
            },
            {
              name: "D√≠a de Spa para Pap√° e Hijo",
              description: "Comienza con una bienvenida de Smoothie de Temporada o agua refrescante con frutas para establecer el √°nimo de relajaci√≥n.<br><br><strong>Incluye:</strong><br>‚Ä¢ Disfruten juntos un recorrido renovador por nuestra zona h√∫meda, con sauna, turco y jacuzzi, ideal para soltar tensiones y activar el cuerpo.<br>‚Ä¢ Contin√∫en con una sesi√≥n de Terapia de fr√≠o revitalizante ‚ùÑÔ∏è el cual es un toque de fr√≠o puro que acaricia la piel y despierta la energ√≠a interior. El cuerpo se aligera, la tensi√≥n se disuelve y surge una sensaci√≥n de claridad y renovaci√≥n, como si el invierno dejara paso a un nuevo amanecer. Adem√°s mejorar la circulaci√≥n y da ese impulso de vitalidad que todo hombre necesita.<br>‚Ä¢ Finalicen con un masaje relajante que ayuda a liberar estr√©s y fortalecer ese v√≠nculo √∫nico entre pap√° e hijo.<br>‚Ä¢ Un ritual masculino, poderoso y especial, perfecto para compartir, desconectar y recargar.",
              duration: "2 horas 30 minutos",
              price: "Paquete Pap√° e Hijo: $380.000"
            },
            {
              name: "Paquete Familiar Premium: Mam√°, Pap√° e Hijos",
              description: "Un espacio familiar donde el bienestar se convierte en un gesto de amor.<br><br>Permitan que cada detalle los envuelva en serenidad. Un masaje relajante cuidadosamente dise√±ado para equilibrar esa paz y tranquilidad que nuestro cuerpo necesita; contin√∫e en nuestra exclusiva zona h√∫meda, donde el sauna, el turco y el jacuzzi brindan una experiencia de purificaci√≥n y descanso profundo.<br><br>Un encuentro sublime para reconectar, celebrar la uni√≥n y regalarse un instante que quedar√° en la memoria de todos.<br><br><strong>L√≠mite de edad:</strong> desde los 5 a√±os en adelante üîÜ<br><br><strong>M√°ximo de ni√±os:</strong> 2 üîÜ<br><br>(Si desea incluir otras personas, el valor autom√°ticamente se eleva. Tener en cuenta que son m√°ximo 6 personas en cuanto a paquetes grupales)",
              duration: "2 horas 30 minutos",
              price: "$460.000"
            }
          ]
        },
        6: { // Spa Luxury
          title: "Spa Luxury - Paquetes",
          packages: [
            {
              name: "Masaje de Relajaci√≥n",
              description: "Sum√©rgete en una experiencia de calma absoluta dise√±ada para aliviar el estr√©s y liberar la tensi√≥n acumulada.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Relajaci√≥n profunda de cuerpo y mente<br>‚Ä¢ Reducci√≥n del estr√©s y la ansiedad<br>‚Ä¢ Sensaci√≥n de paz y renovaci√≥n total",
              duration: "1 hora",
              price: "$320.000"
            },
            {
              name: "Drenaje Linf√°tico",
              description: "Un tratamiento especializado para desintoxicar y revitalizar el organismo de manera natural.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Estimula la circulaci√≥n linf√°tica<br>‚Ä¢ Reduce la retenci√≥n de l√≠quidos e hinchaz√≥n<br>‚Ä¢ Favorece la eliminaci√≥n de toxinas<br>‚Ä¢ Promueve una sensaci√≥n de ligereza y bienestar",
              duration: "1 hora",
              price: "$320.000"
            },
            {
              name: "Masaje de Modelaci√≥n",
              description: "Tratamiento dise√±ado para redefinir la silueta y realzar tu confianza.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Moldea y tonifica zonas espec√≠ficas del cuerpo<br>‚Ä¢ Favorece la reducci√≥n de medidas<br>‚Ä¢ Prepara el cuerpo para ocasiones especiales<br>‚Ä¢ Te ayuda a lucir y sentirte espectacular",
              duration: "1 hora",
              price: "$320.000"
            },
            {
              name: "Miracle Touch",
              description: "Una experiencia √∫nica que combina diferentes t√©cnicas en un solo tratamiento para lograr resultados visibles y transformadores.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Ayuda a perder medidas y moldear el cuerpo<br>‚Ä¢ Estimula la desintoxicaci√≥n natural<br>‚Ä¢ Rejuvenece y renueva la energ√≠a vital<br>‚Ä¢ Efectos notables desde la primera sesi√≥n",
              duration: "1 hora",
              price: "$320.000"
            },
            {
              name: "Miracle Face",
              description: "Tratamiento facial exclusivo para resaltar la belleza natural y devolver vitalidad a la piel.<br><br><strong>Beneficios:</strong><br>‚Ä¢ Redefinici√≥n y tonificaci√≥n de los rasgos faciales<br>‚Ä¢ Revitalizaci√≥n de la piel, dej√°ndola luminosa y fresca<br>‚Ä¢ Estimula la juventud y firmeza natural del rostro",
              duration: "40 minutos",
              price: "$240.000"
            }
          ]
        },
        7: { // Eventos Especiales
          title: "Spa Fechas Especiales - Paquetes",
          packages: [
            {
              name: "Feliz 15 A√±os con tus Mejores Amigas",
              description: "Una celebraci√≥n √∫nica para conmemorar un momento especial, combinando bienestar, diversi√≥n y recuerdos inolvidables.<br><br><strong>Incluye:</strong><br>‚Ä¢ Bienvenida con bebida sin alcohol<br>‚Ä¢ Sauna y turco con esencias herbales<br>‚Ä¢ Masaje corporal relajante con aceites arom√°ticos<br>‚Ä¢ Tratamiento facial con limpieza, exfoliaci√≥n y mascarilla hidratante<br>‚Ä¢ Jacuzzi con burbujas y luces LED<br>‚Ä¢ Snack saludable con frutas y yogurt<br>‚Ä¢ Brindis con mocktail y mini torta personalizada<br>‚Ä¢ Obsequio especial: bata de ba√±o personalizada para la quincea√±era<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "3 horas 30 minutos",
              price: "1 persona ‚Üí $350.000<br>2 personas ‚Üí $700.000<br>3 personas ‚Üí $1.050.000<br>4 personas ‚Üí $1.330.000<br>5 personas ‚Üí $1.750.000<br>6 personas ‚Üí $1.990.000"
            },
            {
              name: "Celebraci√≥n de Cumplea√±os",
              description: "Convierte tu cumplea√±os en una experiencia √∫nica de relajaci√≥n y alegr√≠a en un entorno sofisticado.<br><br><strong>Incluye:</strong><br>‚Ä¢ C√≥ctel sin alcohol de bienvenida<br>‚Ä¢ Sesi√≥n en sauna para desintoxicar y revitalizar<br>‚Ä¢ Masaje corporal personalizado con aceites esenciales<br>‚Ä¢ Sesi√≥n en turco herbal<br>‚Ä¢ Jacuzzi de relajaci√≥n<br>‚Ä¢ Snack con tabla de quesos artesanales y frutas frescas<br>‚Ä¢ Torta personalizada para la ocasi√≥n<br>‚Ä¢ Obsequio especial: bata de ba√±o bordada con iniciales de la cumplea√±era<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "2 horas 50 minutos",
              price: "1 persona ‚Üí $270.000<br>2 personas ‚Üí $540.000<br>3 personas ‚Üí $810.000<br>4 personas ‚Üí $1.020.000<br>5 personas ‚Üí $1.350.000<br>6 personas ‚Üí $1.540.000"
            },
            {
              name: "Despedida de Soltera",
              description: "Celebra la etapa previa al gran d√≠a con una experiencia inolvidable de relajaci√≥n y conexi√≥n entre amigas.<br><br><strong>Incluye:</strong><br>‚Ä¢ Bebida de bienvenida<br>‚Ä¢ Sesi√≥n en ba√±o de vapor con aceites esenciales<br>‚Ä¢ Masaje arom√°tico personalizado con aceites premium<br>‚Ä¢ Acceso a jacuzzi con ambiente musical y de iluminaci√≥n<br>‚Ä¢ Selecci√≥n de snacks gourmet y bandejas de frutas frescas<br>‚Ä¢ T√© de hierbas o aguas saborizadas<br>‚Ä¢ Obsequio: vela perfumada para cada asistente<br>‚Ä¢ Regalo especial para la novia<br><br><strong>Detalles del paquete:</strong><br>‚Ä¢ N√∫mero de personas: m√≠nimo 4 ‚Äì m√°ximo 6",
              duration: "3 horas 30 minutos",
              price: "1 persona ‚Üí $350.000<br>2 personas ‚Üí $700.000<br>3 personas ‚Üí $1.050.000<br>4 personas ‚Üí $1.330.000<br>5 personas ‚Üí $1.750.000<br>6 personas ‚Üí $1.995.000"
            }
          ]
        }
      };

      // Service images mapping
      const serviceImages = {
        1: './Test_Images/Test2/Individual.jpg?v=2', // Spa Individual
        2: './Test_Images/Test2/Couples.jpg',    // Spa para Parejas
        3: './Test_Images/Test2/Friends.jpg?v=2',    // Spa para Amigas
        4: './Test_Images/Test2/Kids.jpg',       // Spa para Ni√±as
        5: './Test_Images/Test2/Family.jpg',     // Spa para Familias
        6: './Test_Images/Test2/Luxury.jpg',     // Spa Luxury
        7: './Test_Images/Test2/SpecialEvents.jpg' // Eventos Especiales
      };

      // Show packages window
      function showPackages(serviceId) {
        // Prevent body scroll
        document.body.classList.add('window-open');

        const packageWindow = document.getElementById('packageWindow');
        const packageTitle = document.getElementById('packageTitle');
        const packageContent = document.getElementById('packageContent');

        const data = packageData[serviceId];
        const serviceImage = serviceImages[serviceId];
        packageTitle.textContent = data.title;

        // Get package-specific images
        const packageImageMap = {
          // Spa Individual
          'Limpieza Facial': './Test_Images/Catalogo/Spa_Individual/Limpieza_Facial.jpg',
          'Exfoliaci√≥n Corporal': './Test_Images/Catalogo/Spa_Individual/Exfoliaci√≥n_corporal.jpg',
          'Masaje con Aceite Caliente': './Test_Images/Catalogo/Spa_Individual/Masaje_con_Aceite_Caliente.jpg',
          'Masaje con Piedras Calientes': './Test_Images/Catalogo/Spa_Individual/Masaje_con_piedras_calientes.jpg',
          'Masaje Relajante': './Test_Images/Catalogo/Spa_Individual/Masaje_Relajante.jpg',
          'Masaje Linf√°tico': './Test_Images/Catalogo/Spa_Individual/Masaje_Linf√°tico.jpg',
          'Masaje Moldeador': './Test_Images/Catalogo/Spa_Individual/Masaje_Moldeador.jpg',

          // Spa para Parejas
          'Rom√°ntico Oasis para Dos': './Test_Images/Catalogo/Spa_Parejas/Romantic Oasis for Two.jpg',
          'Retiro de Reconciliaci√≥n para Dos': './Test_Images/Catalogo/Spa_Parejas/Reconciliation Retreat for Two.jpg',
          'Paquete de Aniversario': './Test_Images/Catalogo/Spa_Parejas/Anniversary Bliss Package.jpg',

          // Spa para Amigas
          'Tarde de Chicas': './Test_Images/Catalogo/Spa_para_Amigas/Tarde de Chicas.jpg',
          'Pasabordo Express de Desestr√©s': './Test_Images/Catalogo/Spa_para_Amigas/The Fast De-Stress Day Pass.jpg',

          // Spa para Ni√±as
          'Experiencia de Armon√≠a para Adolescentes': './Test_Images/Catalogo/Spa_para_Ni√±as/Teen Harmony Spa Experience.jpg',
          'Aventura Spa para Preadolescentes': './Test_Images/Catalogo/Spa_para_Ni√±as/Tween Spa Adventure.jpg',

          // Spa para Familias
          'D√≠a de Spa para Mam√° e Hija': './Test_Images/Catalogo/Spa_para_Familiar/Mother & Daughter Spa Day.jpg',
          'D√≠a de Spa para Pap√° e Hijo': './Test_Images/Catalogo/Spa_para_Familiar/Dia-de-spa-papa-e-hijo.jpg',
          'Paquete Familiar Premium: Mam√°, Pap√° e Hijos': './Test_Images/Catalogo/Spa_para_Familiar/Paquete_Familiar_Premium.jpg',

          // Spa Luxury
          'Masaje de Relajaci√≥n': './Test_Images/Catalogo/Spa_Luxury/Relaxation Massage.jpg',
          'Drenaje Linf√°tico': './Test_Images/Catalogo/Spa_Luxury/Lymphatic Drainage.jpg',
          'Masaje de Modelaci√≥n': './Test_Images/Catalogo/Spa_Luxury/Body Sculpting Session.jpg',
          'Miracle Touch': './Test_Images/Catalogo/Spa_Luxury/Miracle Touch Integrated Therapy.jpg',
          'Miracle Face': './Test_Images/Catalogo/Spa_Luxury/Miracle Face Treatment.jpg',

          // Eventos Especiales
          'Feliz 15 A√±os con tus Mejores Amigas': './Test_Images/Catalogo/Spa_fechas_Especiales/Quincea√±era Friends Celebration.jpg',
          'Celebraci√≥n de Cumplea√±os': './Test_Images/Catalogo/Spa_fechas_Especiales/Birthday Spa Celebration.jpg',
          'Despedida de Soltera': './Test_Images/Catalogo/Spa_fechas_Especiales/Bridal Shower Spa Experience.jpg'
        };

        let packagesHTML = '';
        data.packages.forEach(pkg => {
          // Function to extract lowest price and format it
          function getLowestPrice(priceString) {
            if (priceString.includes('‚Üí') || priceString.includes('<br>')) {
              // Extract all prices - match patterns like $230.000 or $1.150.000
              const priceMatches = priceString.match(/\$[\d\.]+/g);
              if (priceMatches && priceMatches.length > 0) {
                // Convert prices to numbers for comparison
                const numericPrices = priceMatches.map(price => {
                  // Remove $ and all dots (Colombian format uses dots as thousands separator)
                  const cleanPrice = price.replace('$', '').replace(/\./g, '');
                  return parseInt(cleanPrice);
                });

                // Find the minimum value
                const minPrice = Math.min(...numericPrices);

                // Find the original formatted price that matches the minimum
                for (let i = 0; i < numericPrices.length; i++) {
                  if (numericPrices[i] === minPrice) {
                    return `A partir de: ${priceMatches[i]}`;
                  }
                }
              }
            }
            return priceString.startsWith('$') ? priceString : `Precio: ${priceString}`;
          }

          const displayPrice = getLowestPrice(pkg.price);
          let priceHTML = `<span>${displayPrice}</span>`;

          // Modern glassmorphism design for Spa Individual (serviceId === 1)
          if (serviceId === 1) {
            // Extract includes/benefits from description
            let mainDescription = pkg.description;
            let includesContent = '';

            // Check if description contains includes or benefits sections
            if (pkg.description.includes('<strong>Incluye:</strong>') || pkg.description.includes('<strong>Beneficios:</strong>') || pkg.description.includes('<strong>Objetivo:</strong>')) {
              // Find where the Incluye/Beneficios/Objetivo section starts
              const includeIndex = pkg.description.indexOf('<strong>Incluye:</strong>');
              const benefitIndex = pkg.description.indexOf('<strong>Beneficios:</strong>');
              const objectiveIndex = pkg.description.indexOf('<strong>Objetivo:</strong>');
              const splitIndex = includeIndex !== -1 ? includeIndex : (benefitIndex !== -1 ? benefitIndex : objectiveIndex);

              // Split the description
              mainDescription = pkg.description.substring(0, splitIndex).trim();
              includesContent = pkg.description.substring(splitIndex);

              // Add pricing information at the end
              if (pkg.price.includes('‚Üí') || pkg.price.includes('<br>')) {
                includesContent += `<br><br><strong>Precios:</strong><br>${pkg.price}`;
              } else {
                includesContent += `<br><br><strong>Precio:</strong> ${pkg.price}`;
              }
            } else {
              // If no includes/benefits found, create a basic includes section with pricing
              includesContent = `<strong>Informaci√≥n del paquete:</strong><br>${mainDescription.split('.').slice(-2).join('.').trim()}<br><br><strong>Precio:</strong> ${pkg.price}`;
              mainDescription = mainDescription.split('.').slice(0, -2).join('.').trim() + '.';
            }

            // Ensure includesContent is never empty
            if (!includesContent || includesContent.trim() === '') {
              includesContent = `<strong>Detalles del paquete:</strong><br>Duraci√≥n: ${pkg.duration}<br><br><strong>Precio:</strong> ${pkg.price}`;
            }

            const packageId = `package-${serviceId}-${pkg.name.replace(/[\s\/]+/g, '-').replace(/[^\w\-]/g, '')}`;

            const packageImage = packageImageMap[pkg.name] || serviceImage;

            packagesHTML += `
              <div class="modern-card">
                <div class="card-background" style="background-image: url('${packageImage}');"></div>
                <div class="card-content">
                  <div class="card-header">
                    <h2 class="card-title">${pkg.name}</h2>
                    <p class="card-description">${mainDescription}</p>
                  </div>

                  <div class="card-info">
                    <div class="info-item">
                      <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                      </svg>
                      <span>${pkg.duration}</span>
                    </div>
                    <div class="info-item">
                      <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                      </svg>
                      <span>${displayPrice}</span>
                    </div>
                  </div>

                  <div class="card-buttons">
                    <button class="btn-book" onclick="bookPackage('${pkg.name}')">Agendar</button>
                    <button class="btn-includes" onclick="toggleIncludes('${packageId}')">Qu√© incluye</button>
                  </div>

                  <div id="${packageId}" class="includes-content">
                    <p>${includesContent || 'Informaci√≥n disponible pr√≥ximamente.'}</p>
                  </div>
                </div>
              </div>
            `;
          } else {
            // Extract includes/benefits from description for other services
            let mainDescription = pkg.description;
            let includesContent = '';

            // Check if description contains includes or benefits sections
            if (pkg.description.includes('<strong>Incluye:</strong>') || pkg.description.includes('<strong>Beneficios:</strong>') || pkg.description.includes('<strong>Objetivo:</strong>')) {
              // Find where the Incluye/Beneficios/Objetivo section starts
              const includeIndex = pkg.description.indexOf('<strong>Incluye:</strong>');
              const benefitIndex = pkg.description.indexOf('<strong>Beneficios:</strong>');
              const objectiveIndex = pkg.description.indexOf('<strong>Objetivo:</strong>');
              const splitIndex = includeIndex !== -1 ? includeIndex : (benefitIndex !== -1 ? benefitIndex : objectiveIndex);

              // Split the description
              mainDescription = pkg.description.substring(0, splitIndex).trim();
              includesContent = pkg.description.substring(splitIndex);

              // Add pricing information at the end
              if (pkg.price.includes('‚Üí') || pkg.price.includes('<br>')) {
                includesContent += `<br><br><strong>Precios:</strong><br>${pkg.price}`;
              } else {
                includesContent += `<br><br><strong>Precio:</strong> ${pkg.price}`;
              }
            } else {
              // If no includes/benefits found, create a basic includes section with pricing
              includesContent = `<strong>Informaci√≥n del paquete:</strong><br>${mainDescription.split('.').slice(-2).join('.').trim()}<br><br><strong>Precio:</strong> ${pkg.price}`;
              mainDescription = mainDescription.split('.').slice(0, -2).join('.').trim() + '.';
            }

            // Ensure includesContent is never empty
            if (!includesContent || includesContent.trim() === '') {
              includesContent = `<strong>Detalles del paquete:</strong><br>Duraci√≥n: ${pkg.duration}<br><br><strong>Precio:</strong> ${pkg.price}`;
            }

            const packageId = `package-${serviceId}-${pkg.name.replace(/[\s\/]+/g, '-').replace(/[^\w\-]/g, '')}`;

            const packageImage = packageImageMap[pkg.name] || serviceImage;

            packagesHTML += `
              <div class="modern-card">
                <div class="card-background" style="background-image: url('${packageImage}');"></div>
                <div class="card-content">
                  <div class="card-header">
                    <h2 class="card-title">${pkg.name}</h2>
                    <p class="card-description">${mainDescription}</p>
                  </div>

                  <div class="card-info">
                    <div class="info-item">
                      <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <circle cx="12" cy="12" r="10"/>
                        <polyline points="12,6 12,12 16,14"/>
                      </svg>
                      <span>${pkg.duration}</span>
                    </div>
                    <div class="info-item">
                      <svg class="info-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <line x1="12" y1="1" x2="12" y2="23"/>
                        <path d="M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"/>
                      </svg>
                      <span>${displayPrice}</span>
                    </div>
                  </div>

                  <div class="card-buttons">
                    <button class="btn-book" onclick="bookPackage('${pkg.name}')">Agendar</button>
                    <button class="btn-includes" onclick="toggleIncludes('${packageId}')">Qu√© incluye</button>
                  </div>

                  <div id="${packageId}" class="includes-content">
                    <p>${includesContent || 'Informaci√≥n disponible pr√≥ximamente.'}</p>
                  </div>
                </div>
              </div>
            `;
          }
        });

        packageContent.innerHTML = packagesHTML;
        packageWindow.classList.add('active');
      }

      // Book package function - redirects to custom booking calendar
      function bookPackage(packageName) {
        // Encode the service name for URL
        const encodedService = encodeURIComponent(packageName);

        // TODO: Update this URL to your Vercel deployment URL after deploying
        // For now using localhost for testing
        const bookingUrl = `http://localhost:3002?service=${encodedService}`;

        showBookingCalendar(packageName, bookingUrl);
      }

      // Show booking calendar in sliding window with custom calendar
      function showBookingCalendar(serviceName, bookingUrl) {
        // Prevent body scroll
        document.body.classList.add('window-open');

        // First hide the packages window if it's open
        const packageWindow = document.getElementById('packageWindow');
        packageWindow.classList.remove('active');

        // Get the window elements
        const calendlyWindow = document.getElementById('calendlyWindow');
        const windowTitle = calendlyWindow.querySelector('.package-window-header h2');
        const calendlyContent = document.getElementById('calendlyContent');

        // Update window title dynamically
        windowTitle.textContent = `Agendar ${serviceName}`;

        // Clear any existing content
        calendlyContent.innerHTML = '';

        // Create iframe with custom booking calendar
        calendlyContent.innerHTML = `
          <iframe
            src="${bookingUrl}"
            style="width: 100%; height: 100%; border: none; min-height: 600px;"
            frameborder="0"
            allowfullscreen>
          </iframe>
        `;

        // Show the calendar window with slide animation
        calendlyWindow.classList.add('active');
      }

      // Hide Calendly window
      function hideCalendly() {
        const calendlyWindow = document.getElementById('calendlyWindow');
        calendlyWindow.classList.remove('active');

        // Re-enable body scroll
        document.body.classList.remove('window-open');
      }

      // Toggle includes/benefits section
      function toggleIncludes(packageId) {
        try {
          const content = document.getElementById(packageId);
          if (content) {
            content.classList.toggle('active');
          } else {
            console.error('Element not found:', packageId);
          }
        } catch (error) {
          console.error('Error toggling includes:', error);
        }
      }

      // Hide packages window
      function hidePackages() {
        const packageWindow = document.getElementById('packageWindow');
        packageWindow.classList.remove('active');

        // Re-enable body scroll only if calendar window is also closed
        const calendlyWindow = document.getElementById('calendlyWindow');
        if (!calendlyWindow.classList.contains('active')) {
          document.body.classList.remove('window-open');
        }
      }

      // Register ScrollTrigger plugin
      gsap.registerPlugin(ScrollTrigger);

      // Animate text like in info.html
      function animateText(element) {
        if (!element) return;
        
        const text = element.textContent;
        const words = text.split(' ');
        element.innerHTML = words.map(word => 
          `<span class="word" style="display: inline-block; opacity: 0; transform: translateY(30px);">${word}</span>`
        ).join(' ');
        
        // Animate words
        gsap.to(element.querySelectorAll('.word'), {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.03,
          ease: "power2.out"
        });
      }

      // Prepare text for smooth typewriter animation (split into words)
      function prepareText(element) {
        if (!element) return;
        
        const text = element.textContent;
        const words = text.split(' ');
        element.innerHTML = words.map(word => 
          `<span class="word" style="opacity: 0; display: inline-block;">${word}</span>`
        ).join(' ');
      }

      // Sticky cards animation
      document.addEventListener('DOMContentLoaded', () => {
        // Handle background music continuity
        const backgroundMusic = document.getElementById('backgroundMusic');
        const musicPreference = localStorage.getItem('musicPreference');
        const savedTime = localStorage.getItem('musicTime');

        if (musicPreference === 'true' && backgroundMusic) {
          backgroundMusic.volume = 0.5;
          if (savedTime) {
            backgroundMusic.currentTime = parseFloat(savedTime);
          }
          backgroundMusic.play().catch(e => {
            console.log('Audio autoplay failed:', e);
          });

          // Save playback position every second
          setInterval(() => {
            if (!backgroundMusic.paused) {
              localStorage.setItem('musicTime', backgroundMusic.currentTime);
            }
          }, 1000);
        }

        const stickyCards = document.querySelectorAll('.sticky-card');

        // Store original positions of each card BEFORE ScrollTrigger pins them
        cardPositions = [];
        stickyCards.forEach((card) => {
          cardPositions.push(card.offsetTop);
        });

        stickyCards.forEach((card, index) => {
          // Prepare text for animation on each card
          const description = card.querySelector('.sticky-card-copy-description p');
          const title = card.querySelector('.sticky-card-header');
          const subtitle = card.querySelector('.sticky-card-copy-title p');
          
          // Special handling for first card (intro services card)
          if (index === 0) {
            const button = card.querySelector('.sticky-card-button button');
            const scrollArrow = card.querySelector('.scroll-arrow');
            const descriptionContainer = card.querySelector('.sticky-card-copy-description');
            const serviceParagraphs = descriptionContainer ? descriptionContainer.querySelectorAll('p') : [];

            // Set initial hidden state
            if (title) gsap.set(title, { opacity: 0, y: 30 });
            if (subtitle) gsap.set(subtitle, { opacity: 0, y: 20 });
            if (button) gsap.set(button, { opacity: 0, y: 20 });
            if (scrollArrow) gsap.set(scrollArrow, { opacity: 0, y: 10 });
            serviceParagraphs.forEach(p => gsap.set(p, { opacity: 0, y: 20 }));

            // Animate first card on load (fast and smooth)
            setTimeout(() => {
              // Animate title
              if (title) {
                gsap.to(title, {
                  opacity: 1,
                  y: 0,
                  duration: 0.5,
                  ease: "power2.out",
                  delay: 0.2
                });
              }

              // Animate subtitle (if exists)
              if (subtitle) {
                gsap.to(subtitle, {
                  opacity: 1,
                  y: 0,
                  duration: 0.5,
                  ease: "power2.out",
                  delay: 0.4
                });
              }

              // Animate service paragraphs one by one (smooth stagger)
              if (serviceParagraphs.length > 0) {
                gsap.to(serviceParagraphs, {
                  opacity: 1,
                  y: 0,
                  duration: 0.3,
                  stagger: 0.08,
                  ease: "power2.out",
                  delay: 0.4
                });
              }

              // Animate button
              if (button) {
                gsap.to(button, {
                  opacity: 1,
                  y: 0,
                  duration: 0.5,
                  ease: "power2.out",
                  delay: 1.0
                });
              }

              // Animate scroll arrow
              if (scrollArrow) {
                gsap.to(scrollArrow, {
                  opacity: 1,
                  y: 0,
                  duration: 0.5,
                  ease: "power2.out",
                  delay: 1.2
                });
              }
            }, 500);
          } else {
            // Prepare text elements with initial hidden state for other cards
            const button = card.querySelector('.sticky-card-button button');
            const scrollArrows = card.querySelectorAll('.scroll-arrow');
            if (description) prepareText(description);
            if (title) gsap.set(title, { opacity: 0, y: 30 });
            if (subtitle) gsap.set(subtitle, { opacity: 0, y: 20 });
            if (button) gsap.set(button, { opacity: 0, y: 20 });
            scrollArrows.forEach(arrow => gsap.set(arrow, { opacity: 0, y: 10 }));
          }
          
          // Pin all cards except the last one
          if (index < stickyCards.length - 1) {
            ScrollTrigger.create({
              trigger: card,
              start: "top top",
              endTrigger: stickyCards[stickyCards.length - 1],
              end: "top top",
              pin: true,
              pinSpacing: false,
            });
          }

          // Scale and rotate animation
          if (index < stickyCards.length - 1) {
            ScrollTrigger.create({
              trigger: stickyCards[index + 1],
              start: "top bottom",
              end: "top top",
              onUpdate: (self) => {
                const progress = self.progress;
                const scale = 1 - progress * 0.05;
                const afterOpacity = progress * 0.6;

                gsap.set(card, {
                  scale: scale,
                  rotation: 0,
                  "--after-opacity": afterOpacity,
                });
              },
            });
          }

          // Smooth text animation that reacts to scroll progress (much slower, skip first card)
          if (index > 0) {
            const button = card.querySelector('.sticky-card-button button');
            const scrollArrows = card.querySelectorAll('.scroll-arrow');

            ScrollTrigger.create({
              trigger: card,
              start: "top bottom",
              end: "bottom top",
              onUpdate: (self) => {
                const progress = self.progress;

                // Animate title based on scroll progress (much faster)
                if (title) {
                  const titleProgress = Math.max(0, Math.min(1, (progress - 0.1) / 0.3));
                  gsap.set(title, {
                    opacity: titleProgress,
                    y: 30 - (titleProgress * 30)
                  });
                }

                // Animate subtitle based on scroll progress (much faster)
                if (subtitle) {
                  const subtitleProgress = Math.max(0, Math.min(1, (progress - 0.2) / 0.3));
                  gsap.set(subtitle, {
                    opacity: subtitleProgress,
                    y: 20 - (subtitleProgress * 20)
                  });
                }

                // Animate description words based on scroll progress (fast typewriter)
                if (description && description.querySelectorAll('.word').length > 0) {
                  const words = description.querySelectorAll('.word');
                  const descProgress = Math.max(0, Math.min(1, (progress - 0.3) / 0.4));

                  words.forEach((word, wordIndex) => {
                    const wordDelay = (wordIndex / words.length) * 0.2; // Smooth word progression
                    const wordProgress = Math.max(0, Math.min(1, (descProgress - wordDelay) * 3));

                    gsap.set(word, {
                      opacity: wordProgress
                    });
                  });
                }

                // Animate button to appear quickly after text starts
                if (button) {
                  // Button appears much earlier (when text is 30% visible) and stays visible
                  const buttonProgress = Math.max(0, Math.min(1, (progress - 0.35) / 0.15));

                  gsap.set(button, {
                    opacity: buttonProgress,
                    y: 20 - (buttonProgress * 20)
                  });
                }

                // Animate scroll arrows to appear after button
                if (scrollArrows.length > 0) {
                  const arrowProgress = Math.max(0, Math.min(1, (progress - 0.4) / 0.15));

                  scrollArrows.forEach(arrow => {
                    gsap.set(arrow, {
                      opacity: arrowProgress,
                      y: 10 - (arrowProgress * 10)
                    });
                  });
                }
              }
            });
          }
        });

        // Initial animation for cards
        gsap.set(stickyCards, { opacity: 0, y: 50 });
        gsap.to(stickyCards, {
          opacity: 1,
          y: 0,
          duration: 0.8,
          stagger: 0.1,
          ease: "power2.out",
          delay: 0.3
        });

      });
    </script>

    <!-- Custom Cursor Script -->
    <script>
      // Smooth custom cursor with GSAP
      const cursor = document.getElementById('customCursor');
      let mouseX = 0;
      let mouseY = 0;
      let cursorX = 0;
      let cursorY = 0;

      // Track mouse position
      document.addEventListener('mousemove', (e) => {
        mouseX = e.clientX;
        mouseY = e.clientY;
      });

      // Smooth cursor animation with lerp (linear interpolation)
      gsap.ticker.add(() => {
        // Lerp factor - lower = smoother/slower, higher = faster
        const speed = 0.15;

        cursorX += (mouseX - cursorX) * speed;
        cursorY += (mouseY - cursorY) * speed;

        gsap.set(cursor, {
          x: cursorX,
          y: cursorY
        });
      });
    </script>
  </body>
</html>